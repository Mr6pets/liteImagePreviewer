# 贡献指南

<cite>
**本文档中引用的文件**  
- [CONTRIBUTING.md](file://CONTRIBUTING.md)
- [package.json](file://package.json)
- [js/core.js](file://js/core.js)
- [js/editor.js](file://js/editor.js)
- [js/imageManager.js](file://js/imageManager.js)
- [js/viewer.js](file://js/viewer.js)
- [js/ui.js](file://js/ui.js)
- [js/dragUpload.js](file://js/dragUpload.js)
- [js/eventHandler.js](file://js/eventHandler.js)
- [build.js](file://build.js)
</cite>

## 目录
1. [如何贡献](#如何贡献)
2. [社区期望的贡献类型](#社区期望的贡献类型)
3. [代码提交规范](#代码提交规范)
4. [Pull Request流程](#pull-request流程)
5. [开发环境配置指引](#开发环境配置指引)
6. [测试与文档同步要求](#测试与文档同步要求)
7. [代码质量标准](#代码质量标准)
8. [社区氛围与沟通建议](#社区氛围与沟通建议)

## 如何贡献

本项目欢迎所有形式的贡献。无论您是修复一个微小的拼写错误，还是实现一个复杂的新功能，您的参与都至关重要。

### 报告问题

如果您发现了 Bug 或有功能建议，请遵循以下步骤：

1. 检查 [Issues](https://github.com/Mr6pets/liteImagePreviewer/issues) 确认问题尚未被报告
2. 创建新的 Issue，详细描述问题或建议
3. 提供复现步骤（如果是 Bug）

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L6-L13)

## 社区期望的贡献类型

我们鼓励以下类型的贡献：

### 功能增强
- 添加新的图像滤镜（如复古、黑白、模糊等）
- 支持更多导出格式（如 WebP、AVIF）
- 增强编辑功能（如旋转、翻转、调整尺寸）
- 实现批量处理功能

### Bug修复
- 修复图像加载、预览或编辑过程中的错误
- 解决不同浏览器的兼容性问题
- 修复内存泄漏或性能问题
- 修正用户界面显示异常

### 文档改进
- 完善 README 和 CONTRIBUTING 文档
- 添加代码注释和函数说明
- 编写使用教程和示例
- 改进多语言支持

### 性能优化
- 优化图像处理算法
- 改进懒加载和内存管理
- 减少包体积和加载时间
- 提升交互响应速度

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L4-L18)
- [js/editor.js](file://js/editor.js#L10-L20)
- [js/imageManager.js](file://js/imageManager.js#L5-L15)

## 代码提交规范

为保持代码库的一致性和可维护性，请遵守以下规范：

### 代码风格
- 本项目使用标准 JavaScript 风格
- 保持缩进一致（使用 4 个空格）
- 使用驼峰命名法（camelCase）命名变量和函数
- 类名使用帕斯卡命名法（PascalCase）

### 提交消息格式
使用约定式提交（Conventional Commits）格式：

- `feat:` 新功能（feature）
- `fix:` 修复 Bug
- `docs:` 文档更新
- `style:` 代码格式调整（不影响代码运行）
- `refactor:` 代码重构
- `test:` 添加或修改测试
- `chore:` 构建过程或辅助工具的变动

示例：
```
git commit -m "feat: 添加水印透明度调节功能"
git commit -m "fix: 修复裁剪功能在高分辨率图片上的定位问题"
```

### 分支命名规则
- 功能分支：`feature/功能描述`（如 `feature/watermark-opacity`）
- 修复分支：`fix/问题描述`（如 `fix/crop-position-bug`）
- 文档分支：`docs/文档描述`（如 `docs/contribution-guide`）

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L14-L18)
- [package.json](file://package.json#L5-L10)

## Pull Request流程

请遵循以下流程提交 Pull Request：

1. **Fork 仓库**
   ```bash
   git clone https://github.com/your-username/liteImagePreviewer.git
   ```

2. **创建特性分支**
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **提交更改**
   ```bash
   git add .
   git commit -m "feat: 描述你的更改"
   ```

4. **推送分支**
   ```bash
   git push origin feature/your-feature-name
   ```

5. **发起 PR**
   - 访问 GitHub 仓库页面
   - 点击 "Compare & pull request"
   - 填写 PR 描述，说明更改内容和目的

6. **等待代码审查**
   - 维护者将审查您的代码
   - 根据反馈进行修改
   - 通过审查后合并

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L14-L18)

## 开发环境配置指引

### 环境要求
- Node.js >= 14.0.0
- npm 包管理器

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```
此命令将同时启动：
- 开发服务器（`npm start`）
- SCSS 监听编译（`sass:watch`）

### 构建生产版本
```bash
npm run build
```
或生成分发包：
```bash
npm run dist
```

### 项目结构
```
.
├── js/                    # JavaScript 源码
├── src/scss/             # SCSS 源码
├── build.js              # 构建脚本
├── server.js             # 开发服务器
└── package.json          # 项目配置
```

**Section sources**
- [package.json](file://package.json#L5-L10)
- [build.js](file://build.js)
- [server.js](file://server.js)

## 测试与文档同步要求

### 测试要求
- 新功能应包含相应的测试用例
- 修复 Bug 时应添加测试以防止回归
- 确保现有测试通过
- 在提交前运行本地测试

### 文档同步更新
- 实现新功能时，同步更新 README 文档
- 修改 API 或配置时，更新相关说明
- 添加新的配置选项时，完善文档描述
- 确保代码注释与实现保持一致

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L4-L18)
- [README.md](file://README.md)

## 代码质量标准

为确保代码质量和可维护性，请遵守以下标准：

### 避免全局变量
- 使用模块化封装
- 通过依赖注入传递核心对象
- 示例：`ImageEditor` 类通过构造函数接收 `core` 对象

```javascript
class ImageEditor {
    constructor(core) {
        this.core = core;
        // ...
    }
}
```

**Section sources**
- [js/editor.js](file://js/editor.js#L2-L5)

### 模块化封装
- 每个功能模块独立封装
- 清晰的职责划分：
  - `core.js`: 核心控制器
  - `editor.js`: 图像编辑功能
  - `viewer.js`: 图像预览功能
  - `imageManager.js`: 图像管理
  - `ui.js`: 用户界面
  - `dragUpload.js`: 拖拽上传
  - `eventHandler.js`: 事件处理

### 注释覆盖率
- 类和方法应有 JSDoc 注释
- 复杂逻辑添加行内注释
- 公共 API 提供详细说明
- 魔法数字添加解释

### 代码复用
- 避免重复代码
- 提取公共函数到工具模块
- 使用事件委托减少监听器数量
- 实现功能组件化

**Section sources**
- [js/core.js](file://js/core.js#L2-L15)
- [js/editor.js](file://js/editor.js)
- [js/imageManager.js](file://js/imageManager.js)
- [js/viewer.js](file://js/viewer.js)
- [js/ui.js](file://js/ui.js)

## 社区氛围与沟通建议

我们致力于营造一个友好、包容的社区环境：

### 先讨论后实现
- 在开始复杂功能开发前，先提交 Issue 讨论设计思路
- 获取反馈和建议，避免不必要的工作
- 确认需求优先级和实现方案

### 欢迎新手
- 我们欢迎所有技能水平的贡献者
- 不要害怕提问
- 从小的贡献开始（如文档改进、Bug 修复）
- 我们会提供必要的指导和支持

### 友好沟通
- 保持尊重和礼貌
- 建设性地提出批评
- 感谢他人的贡献
- 共同维护积极的社区氛围

### 代码审查原则
- 审查者应提供清晰、具体的反馈
- 贡献者应开放接受建议
- 聚焦代码质量而非个人
- 通过对话达成共识

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L1-L18)